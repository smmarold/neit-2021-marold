
<html>
<title>Game Reviews</title>
<head>
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<style type='text/css'>
			.imgframe   { background:black; padding:12px; border:1px solid #999; }
		</style>
</head>
<body>

    

<div class="container">
	<div class="row">
		<div class='col-md-8'>
			<h1>Game Reviews</h1>
			
			
			<table class="table table-striped">
			<thead>
			  <tr>
				<th>Game Title</th>
				<th>Console</th>
				<th>Rating</th>
				<th>Score</th>
			  </tr>
			</thead>
			<tbody id="reviewsBody">
			   
			   
				
			</tbody>
		  </table>
	  </div>
	 
	  <div class='col-md-4' style='margin-top:200px;'>
		<h2 id="gameTitle"></h2>
			<img id='gameImage'  src=''>
	  </div>
	</div>
</div>

</body>
</html>

 <script>
	
	fetch('https://se251-node.herokuapp.com/w3')
  	.then(response => response.json())
	.then(reviews => {

		let tableBody = document.getElementById(`reviewsBody`)
		let imgTitle = document.getElementById('gameTitle')
		let imgImage = document.getElementById('gameImage')
		let str = ``
		let links = []

		for(i=0; i<reviews.length; i++)
		{
			str += `<tr id="${String(i)}">`
			for(value in reviews[i])
			{
				if(value != 'gameId' && value != 'imageName')
				{
					if(value == 'gameTitle')
					{
						links[i] = `<td><a id="${reviews[i]['gameId']}" href="#"> ${reviews[i][value]}</a></td>`
						str += links[i]
					}
					else
						str += `<td>${reviews[i][value]}</td>`
				}
					
			}
			str += `</tr>`
			tableBody.innerHTML = str	
		}

		for(let j = 0; j<links.length; j++)
		{
			let thisLink = document.getElementById(`${reviews[j]['gameId']}`)
			let imgSrc = reviews[j][`imageName`]
			let gmTitle = reviews[j]['gameTitle']
			thisLink.addEventListener(`click`, (e)=>{
				imgImage.src=`Images/${imgSrc}`
				imgImage.setAttribute('class', 'imgFrame')
				imgTitle.innerText = gmTitle
			})
		}
	})
	
</script>
